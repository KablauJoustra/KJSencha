# Component Generator

## Introduction

The component generator provides classes that make it easy to create ExtJS components
on the server-side. These classes can be serialized to JSON or Javascript and lazy loaded through AJAX.

## Configuring components

Components can be configured by providing a `getComponentConfig()` in your module which
returns configuration similar to what a ServiceManager expects.

The following example demonstrates how you can define a component named `Application.php.Panel`
which can later be loaded in Javascript.

```php
<?php

namespace Application;

use KJSencha\Frontend as Ext;

class Module
{
    /**
     * @return array
     */
    public function getComponentConfig()
    {
        return array(
            'factories' => array(
                'Application.php.Panel' => function($sm) {
                    return new Ext\Panel(array(
                        'title' => 'A PHP generated component',
                        'html'  => 'This component is generated by KJSencha'
                    ));
                }
            ),
            'invokables' => array(
                'Application.php.Window' => 'Application\ExtJS\Window'
            ),
        );
    }

}
```

These components can later be loaded in Javascript using the KJSencha.data.Factory service. The recommended
way to configure this is as follows:

```javascript
Ext.application({

    name: 'KJSenchaApp',

    controllers: [

    ],

    launch: function() {
    	KJSenchaApp.data = Ext.create('KJSencha.data.Factory');
    }
});
```

This creates a global KJSencha.data variable which can later be used while creating a window
that needs to load a service side component

```javascript
Ext.create('Ext.Window', {
    width: 800,
    height: 400,
    loader: Application.data.createCmpLoader('Application.php.Window')
}).show();
```

Components can be replaced recursively with the `cmp` property:

```javascript
Ext.create('Ext.Window', {
    width: 800,
    height: 400,
    layout: 'fit',
    loader: KJSenchaApp.data.createCmpLoader({
        cmp: 'TestComponent',
        title: 'Test Title',
        layout: 'border',
        items: [
            {cmp: 'TestComponent', region: 'center'},
            {cmp: 'TestComponent', region: 'east', width: 200}
        ]})
}).show();
```